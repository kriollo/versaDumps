# Changelog

Todos los cambios notables en VersaDumps Visualizer ser√°n documentados en este archivo.

El formato est√° basado en [Keep a Changelog](https://keepachangelog.com/es-ES/1.0.0/),
y este proyecto adhiere a [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [2.2.0] - 2025-10-28

### ‚ú® Agregado
- **Soporte completo para versadumps-php 2.2.0**:
  - Integraci√≥n con la nueva estructura de payload que incluye objeto `metadata`
  - Visualizaci√≥n de stack traces completos con informaci√≥n detallada de frames
  - Soporte para m√©todos sem√°nticos (success, error, info, warning, important)
  - Compatibilidad con 10 colores personalizados (red, blue, green, yellow, orange, purple, pink, cyan, gray, white)
  - Procesamiento de etiquetas con emojis
  - Soporte para ejecuci√≥n condicional (if/unless)
  - Manejo de m√©todo once() para prevenir duplicados en loops
  - Profundidad m√°xima configurable para serializaci√≥n

### üé® Interfaz
- **Componente de Stack Trace**: Nueva secci√≥n expandible en cada log que muestra:
  - Clase y m√©todo donde se origin√≥ el dump
  - Ruta completa del archivo
  - N√∫mero de l√≠nea exacto
  - Jerarqu√≠a completa de llamadas (frames)
- **Colores sem√°nticos**: Cada log muestra un borde de color seg√∫n su tipo:
  - Verde para success
  - Rojo para error/important
  - Azul para info
  - Amarillo para warning
  - Y 6 colores adicionales personalizables
- **Normalizaci√≥n mejorada de payloads**: Procesamiento inteligente que soporta tanto el formato 2.2.0 como versiones anteriores

### üîß Mejorado
- **Procesamiento de metadata**: Extracci√≥n correcta de `metadata.trace` del payload PHP
- **Compatibilidad retroactiva**: El visualizador mantiene soporte para formatos antiguos de payload
- **Logging de debugging**: Logs detallados en consola para diagn√≥stico (`üì¶ Payload recibido`, `üîÑ Datos normalizados`)
- **Preservaci√≥n de metadata**: El objeto metadata ahora se mantiene completo para debugging y procesamiento posterior

### üêõ Corregido
- **Bug cr√≠tico en extracci√≥n de trace**: Corregida la lectura de `metadata.trace` (anteriormente buscaba incorrectamente `metadata.includeTrace`)
- **P√©rdida de metadata**: Se elimin√≥ el c√≥digo que borraba prematuramente el objeto `metadata` del payload
- **Mapeo de colores**: Correcci√≥n en el mapeo de colores sem√°nticos a clases Tailwind CSS
- **Visualizaci√≥n de traces**: Los stack traces ahora se muestran correctamente en la interfaz

### üîß T√©cnico
- **Estructura de payload normalizada**: Sistema robusto que maneja:
  - `metadata.trace`: Array de frames con informaci√≥n de stack trace
  - `metadata.color`: Color personalizado del log
  - `metadata.max_depth`: Profundidad m√°xima de serializaci√≥n
  - Fallbacks para compatibilidad con versiones anteriores
- **Computed properties optimizadas**:
  - `traceFrames`: Procesa y formatea frames de stack trace
  - `borderColor`: Determina color del borde basado en metadata o hash de archivo
  - `semanticColors`: Mapeo completo de colores a clases CSS
- **Mejor manejo de context.variables**: Soporte para la nueva estructura donde variables vienen dentro de `context.variables`

### üìù Compatibilidad
- **versadumps-php 2.2.0**: Soporte completo para todas las caracter√≠sticas de la librer√≠a PHP actualizada
- **Builder Pattern**: Compatible con el nuevo patr√≥n de construcci√≥n encadenado
- **M√©todos sem√°nticos**: Integraci√≥n con success(), error(), info(), warning(), important()
- **Backward compatible**: Mantiene compatibilidad con payloads de versiones 2.1.0 y anteriores

### üöÄ Performance
- **Procesamiento optimizado**: Normalizaci√≥n de payloads sin impacto en rendimiento
- **Renderizado condicional**: Stack traces solo se procesan y muestran cuando est√°n presentes
- **Carga eficiente**: Expansi√≥n/colapso de traces sin recargar componentes

## [2.1.0] - 2025-09-16

### üîß Corregido
- **Indicador de estado del servidor**: Se a√±adi√≥ un endpoint `/health` y un indicador en la interfaz que muestra estado 'online'/'offline'/'unknown' con sondeo cada 5s.
- **Reinicio del servidor al guardar configuraci√≥n**: Ahora la aplicaci√≥n reinicia el servidor HTTP internamente cuando se guardan cambios relevantes en `config.yml` (por ejemplo, cambio de puerto o host), aplicando los nuevos valores sin requerir reinicio manual.
- **Manejo de puerto y arranque**: Se corrigieron problemas con la configuraci√≥n del puerto (anteriormente permisos y puerto err√≥neo). El servidor ahora se inicia correctamente en el arranque con la configuraci√≥n cargada.
- **Correcci√≥n en comprobaci√≥n de actualizaciones**: Evita falsos positivos cuando la API de GitHub responde con rate limiting; se a√±ade verificaci√≥n adicional en el frontend para asegurar que la versi√≥n reportada es realmente m√°s nueva.

### üé® Interfaz
- **Recarga de configuraci√≥n en caliente**: Al guardar la configuraci√≥n desde el modal, la UI aplica los cambios de tema y idioma inmediatamente y reinicia el sondeo de salud del servidor si cambian host/puerto.

### üîß T√©cnico
- **Mejor sincronizaci√≥n frontend/backend**: Guardado de configuraci√≥n desde frontend ahora persiste y notifica al backend para aplicar los cambios sin necesidad de reiniciar la aplicaci√≥n.
- **Logging mejorado**: Mensajes informativos a√±adidos para el proceso de guardado y reinicio del servidor para facilitar debugging.

## [2.0.1] - 2025-09-08

### ‚ú® Agregado
- **Sistema de etiquetas personalizadas (Labels)**: Nueva propiedad `label` en dumps de PHP que reemplaza autom√°ticamente la primera clave del contexto
- **Funci√≥n de copia al portapapeles**: Bot√≥n de copia en cada log con notificaci√≥n toast de confirmaci√≥n
- **Notificaciones toast**: Sistema de feedback visual para acciones del usuario con animaciones suaves
- **Soporte completo para i18n**: Textos de notificaciones traducidos en espa√±ol e ingl√©s

### üîß Mejorado
- **Sincronizaci√≥n mejorada de badges**: Correcci√≥n completa del sistema de contadores entre frontend y backend
- **Logs de debugging avanzados**: Sistema completo de logs para diagn√≥stico de problemas de sincronizaci√≥n
- **Procesamiento inteligente de datos**: Manejo autom√°tico de arrays y objetos en el sistema de labels
- **Gesti√≥n robusta de contadores**: Verificaci√≥n y correcci√≥n autom√°tica de desincronizaciones entre UI y sistema operativo
- **Experiencia de usuario mejorada**: Feedback inmediato para todas las acciones principales

### üé® Interfaz
- **Toast notifications**: Notificaciones elegantes en la esquina superior derecha con animaci√≥n slide-in
- **Iconos mejorados**: Nuevo bot√≥n de copia con icono dedicado en cada log
- **Animaciones fluidas**: Transiciones CSS para todas las notificaciones y estados de la UI
- **Mejor feedback visual**: Confirmaciones claras para acciones como copiar y limpiar logs

### üîß T√©cnico
- **Arquitectura de labels**: Sistema robusto para procesar etiquetas personalizadas desde PHP
  - Soporte para contextos de tipo array y object
  - Preservaci√≥n del orden y estructura de datos
  - Eliminaci√≥n autom√°tica de propiedades procesadas
- **Sistema de logs mejorado**:
  - Logs detallados en frontend (JavaScript console)
  - Logs del backend (Go runtime logs)
  - Tracking completo del flujo de datos
- **Sincronizaci√≥n de estado**:
  - Verificaci√≥n autom√°tica de contadores al inicio
  - Correcci√≥n proactiva de desincronizaciones
  - Manejo robusto de errores en actualizaci√≥n de badges
- **API de clipboard moderna**: Uso de `navigator.clipboard` con manejo de errores completo

### üêõ Corregido
- **Desincronizaci√≥n de badges**: Problema cr√≠tico donde el contador del t√≠tulo de ventana no se sincronizaba correctamente
- **Cache de Windows**: Issues con el cache del t√≠tulo de ventana en Windows resueltos con actualizaciones forzadas
- **Condiciones de carrera**: Eliminaci√≥n de race conditions en la actualizaci√≥n de contadores
- **Persistencia incorrecta**: Correcci√≥n del problema donde contadores persist√≠an incorrectamente entre sesiones

### üìù Documentaci√≥n
- Logs de debugging documentados para troubleshooting
- Especificaci√≥n completa del sistema de labels
- Gu√≠a de uso del sistema de notificaciones

### üöÄ Performance
- **Optimizaci√≥n de contadores**: Reducci√≥n de llamadas redundantes al backend
- **Gesti√≥n eficiente de memoria**: Limpieza autom√°tica de referencias temporales
- **Lazy loading de iconos**: Carga optimizada de recursos de interfaz

### üí° Compatibilidad
- **Windows**: Mejoras espec√≠ficas para el sistema de badges en taskbar
- **Multiplataforma**: Mantenimiento de compatibilidad con macOS y Linux
- **Navegadores modernos**: Uso de APIs modernas con fallbacks apropiados

## [1.0.14] - 2025-09-01

### ‚ú® Agregado
- **Funci√≥n de verificaci√≥n manual de actualizaciones**: Nuevo bot√≥n "Revisar actualizaci√≥n" en el panel de configuraci√≥n
- **Modal de confirmaci√≥n mejorado**: Informaci√≥n detallada de versiones con estados diferenciados
- **Sistema de verificaci√≥n dual**: Verificaciones autom√°ticas (silenciosas) y manuales (con modal)

### üîß Mejorado
- **Notificaciones inteligentes**: Las verificaciones autom√°ticas solo notifican cuando hay actualizaciones reales disponibles
- **Mejor experiencia de usuario**: Modal de confirmaci√≥n con botones habilitados/deshabilitados seg√∫n disponibilidad de actualizaciones
- **Interfaz refinada**: Estilos mejorados para el sistema de actualizaciones con soporte completo para modo oscuro
- **Manejo mejorado de errores**: Mejor gesti√≥n de rate limiting de la API de GitHub y errores de conexi√≥n

### üé® Interfaz
- Nuevo dise√±o del modal de actualizaciones con informaci√≥n clara de versiones
- Botones adaptativos que se deshabilitan cuando no hay actualizaciones disponibles
- Indicadores visuales mejorados para diferentes estados de actualizaci√≥n

### üîß T√©cnico
- Logs de debugging mejorados para diagn√≥stico del sistema de actualizaciones
- Optimizaci√≥n del rendimiento en verificaciones autom√°ticas
- Compatibilidad mejorada con Windows para el sistema de actualizaciones

## [1.0.9] - 2025-09-01

### ‚ú® Agregado
- Sistema de gesti√≥n de versiones din√°mico desde el backend
- Script `update-version.ps1` para actualizar la versi√≥n en todos los archivos autom√°ticamente
- La versi√≥n ahora se obtiene completamente desde `updater.go` sin valores hardcodeados en el frontend

### üîß Mejorado
- El frontend ahora muestra la versi√≥n real desde el backend en todos los lugares
- Simplificaci√≥n del mantenimiento de versiones

## [1.0.8] - 2025-09-01

### ‚ú® Agregado
- **Sistema completo de auto-actualizaci√≥n**
  - Verificaci√≥n autom√°tica de nuevas versiones desde GitHub Releases
  - Descarga con barra de progreso
  - Instalaci√≥n autom√°tica con elevaci√≥n de privilegios (UAC)
  - Notificaciones del sistema cuando hay actualizaciones
- **Indicador de versi√≥n** en la esquina inferior izquierda
- **Badge de actualizaci√≥n** que aparece cuando hay nueva versi√≥n disponible
- Componente `UpdateNotification.vue` para gestionar actualizaciones
- Soporte multi-idioma para el sistema de actualizaciones

### üé® Mejorado
- Icono corporativo actualizado
- Configuraci√≥n correcta del nombre de la aplicaci√≥n (VersaDumps en lugar de app)
- Ruta de instalaci√≥n mejorada: `C:\Program Files\VersaDumps\`
- Informaci√≥n del producto en el instalador

### üîß T√©cnico
- Separaci√≥n del c√≥digo de actualizaci√≥n por plataforma (`updater_windows.go`, `updater_unix.go`)
- Integraci√≥n con GitHub API para verificar releases

## [1.0.7] - 2025-08-29

### ‚ú® Agregado
- **Instalador NSIS para Windows**
  - Instalador profesional con interfaz gr√°fica
  - Versi√≥n portable en ZIP
  - Soporte para espa√±ol e ingl√©s
  - Desinstalaci√≥n limpia desde Panel de Control

### üîß Corregido
- Configuraci√≥n del instalador NSIS con rutas correctas
- Nombres de archivos de salida en el workflow

## [1.0.6] - 2025-08-29

### üîß Corregido
- Detecci√≥n din√°mica de la versi√≥n de webkit2gtk disponible en Ubuntu
- Compatibilidad mejorada con diferentes versiones de Ubuntu en GitHub Actions

## [1.0.5] - 2025-08-29

### üîß Corregido
- Dependencias de Ubuntu para webkit2gtk-4.0-dev
- Instalaci√≥n correcta de paquetes en el workflow de GitHub Actions

## [1.0.4] - 2025-08-29

### üêõ Corregido
- Error de case-sensitivity en Linux: `lineHr.vue` ‚Üí `LineHr.vue`
- Compilaci√≥n exitosa en sistemas Linux

## [1.0.3] - 2025-08-29

### üîß Corregido
- Nombres de paquetes webkit correctos para Ubuntu
- Manejo de nombres de salida por defecto de Wails
- Renombrado correcto de ejecutables despu√©s de la compilaci√≥n

## [1.0.2] - 2025-08-29

### üîß Corregido
- Rutas de cach√© para `go.sum` y `package-lock.json` en GitHub Actions
- Copia correcta de `config.yml` al directorio de build
- Problemas de compilaci√≥n en el workflow

## [1.0.1] - 2025-08-29

### ‚ú® Agregado
- Workflow simplificado de GitHub Actions con jobs separados por OS
- Workflow de prueba para Windows

### üîß Corregido
- Versi√≥n de Wails y par√°metros de build
- Eliminaci√≥n de flags problem√°ticos en el workflow
- Mejor compatibilidad con diferentes sistemas operativos

## [1.0.0] - 2025-08-29

### üéâ Release Inicial

### ‚ú® Caracter√≠sticas Principales

#### **Interfaz de Usuario**
- Visualizador de dumps/logs en tiempo real
- Tema oscuro/claro con persistencia
- Soporte multi-idioma (Espa√±ol/Ingl√©s)
- Vista de √°rbol JSON expandible/colapsible
- Resaltado de sintaxis para c√≥digo
- Ordenamiento de logs (m√°s recientes/m√°s antiguos)
- Badge contador de logs en la barra de t√≠tulo

#### **Funcionalidades Core**
- Servidor HTTP integrado para recibir dumps (puerto configurable)
- Procesamiento en tiempo real de datos JSON
- Vista detallada de stack traces con informaci√≥n de archivo y l√≠nea
- Capacidad de abrir archivos directamente en el editor (VS Code preferido)
- Notificaciones del sistema cuando la ventana est√° minimizada
- Limpieza de todos los logs con un clic

#### **Configuraci√≥n**
- Modal de configuraci√≥n con:
  - Servidor y puerto personalizables
  - Selecci√≥n de idioma
  - Cambio de tema
  - Opci√≥n para mostrar/ocultar tipos de variables
- Persistencia de configuraci√≥n en `config.yml`
- Carga autom√°tica de configuraci√≥n al iniciar

#### **Integraci√≥n con Sistema**
- **Windows**: Actualizaci√≥n del √≠cono en la barra de tareas con contador
- **macOS**: Badge en el Dock con contador
- **Linux**: Soporte b√°sico de notificaciones
- Compilaci√≥n multiplataforma con Wails

#### **Automatizaci√≥n y CI/CD**
- GitHub Actions workflow para builds autom√°ticos
- Generaci√≥n de releases para Windows, macOS y Linux
- Script de release (`release.ps1`) para facilitar versionado
- Documentaci√≥n completa de instalaci√≥n y uso

### üõ†Ô∏è Stack Tecnol√≥gico
- **Backend**: Go 1.23
- **Frontend**: Vue 3 + Vite
- **Framework**: Wails v2.10.2
- **Estilos**: Tailwind CSS
- **Iconos**: Sistema de iconos personalizado
- **Build**: GitHub Actions para CI/CD

### üì¶ Formatos de Distribuci√≥n
- **Windows**: Ejecutable portable (.exe)
- **macOS**: Archivo tar.gz
- **Linux**: Archivo tar.gz

### üìù Documentaci√≥n
- README completo en espa√±ol
- Gu√≠a de instalaci√≥n paso a paso
- Ejemplos de uso con Laravel
- Documentaci√≥n de la API HTTP

---

## Convenciones

### Tipos de Cambios
- ‚ú® **Agregado**: Nueva funcionalidad
- üîß **Corregido**: Correcci√≥n de errores
- üé® **Mejorado**: Mejoras en funcionalidad existente
- üìù **Documentaci√≥n**: Cambios en documentaci√≥n
- üêõ **Bug Fix**: Correcci√≥n de bugs espec√≠ficos
- ‚ôªÔ∏è **Refactor**: Cambios de c√≥digo sin afectar funcionalidad
- üöÄ **Performance**: Mejoras de rendimiento
- üîí **Seguridad**: Correcciones de seguridad

### Enlaces
- [Repositorio](https://github.com/kriollo/versaDumps)
- [Releases](https://github.com/kriollo/versaDumps/releases)
- [Issues](https://github.com/kriollo/versaDumps/issues)
